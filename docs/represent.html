<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Representing and visualizing ego-networks | Egocentric network analysis with R</title>
  <meta name="description" content="Personal network analysis with R" />
  <meta name="generator" content="bookdown 0.28 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Representing and visualizing ego-networks | Egocentric network analysis with R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Personal network analysis with R" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Representing and visualizing ego-networks | Egocentric network analysis with R" />
  
  <meta name="twitter:description" content="Personal network analysis with R" />
  

<meta name="author" content="Raffaele Vacca" />


<meta name="date" content="2022-09-15" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="basics.html"/>
<link rel="next" href="composition.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Contents</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#setup"><i class="fa fa-check"></i><b>1.1</b> Workshop setup</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#materials"><i class="fa fa-check"></i><b>1.2</b> Workshop materials</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#r-settings"><i class="fa fa-check"></i><b>1.3</b> R settings</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="index.html"><a href="index.html#packages"><i class="fa fa-check"></i><b>1.3.1</b> Required R packages</a></li>
<li class="chapter" data-level="1.3.2" data-path="index.html"><a href="index.html#rstudio-options"><i class="fa fa-check"></i><b>1.3.2</b> RStudio options</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#data"><i class="fa fa-check"></i><b>1.4</b> Data</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#author-and-contacts"><i class="fa fa-check"></i><b>1.5</b> Author and contacts</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="basics.html"><a href="basics.html"><i class="fa fa-check"></i><b>2</b> R basics</a>
<ul>
<li class="chapter" data-level="2.1" data-path="basics.html"><a href="basics.html#overview"><i class="fa fa-check"></i><b>2.1</b> Overview</a></li>
<li class="chapter" data-level="2.2" data-path="basics.html"><a href="basics.html#starting-R-and-loading-packages"><i class="fa fa-check"></i><b>2.2</b> Starting R and loading packages</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="basics.html"><a href="basics.html#console-vs-scripts"><i class="fa fa-check"></i><b>2.2.1</b> Console vs scripts</a></li>
<li class="chapter" data-level="2.2.2" data-path="basics.html"><a href="basics.html#getting-help"><i class="fa fa-check"></i><b>2.2.2</b> Getting help</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="basics.html"><a href="basics.html#objects-in-r"><i class="fa fa-check"></i><b>2.3</b> Objects in R</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="basics.html"><a href="basics.html#the-workspace"><i class="fa fa-check"></i><b>2.3.1</b> The workspace</a></li>
<li class="chapter" data-level="2.3.2" data-path="basics.html"><a href="basics.html#saving-and-removing-objects"><i class="fa fa-check"></i><b>2.3.2</b> Saving and removing objects</a></li>
<li class="chapter" data-level="2.3.3" data-path="basics.html"><a href="basics.html#vector-and-matrix-objects"><i class="fa fa-check"></i><b>2.3.3</b> Vector and matrix objects</a></li>
<li class="chapter" data-level="2.3.4" data-path="basics.html"><a href="basics.html#dataframes"><i class="fa fa-check"></i><b>2.3.4</b> Data frames</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="basics.html"><a href="basics.html#arithmetic-statistical-and-relational-operations"><i class="fa fa-check"></i><b>2.4</b> Arithmetic, statistical, and relational operations</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="basics.html"><a href="basics.html#arithmetic-operations-and-recycling"><i class="fa fa-check"></i><b>2.4.1</b> Arithmetic operations and recycling</a></li>
<li class="chapter" data-level="2.4.2" data-path="basics.html"><a href="basics.html#relational-operations-and-logical-vectors"><i class="fa fa-check"></i><b>2.4.2</b> Relational operations and logical vectors</a></li>
<li class="chapter" data-level="2.4.3" data-path="basics.html"><a href="basics.html#examples-of-arithmetic-and-statistical-functions"><i class="fa fa-check"></i><b>2.4.3</b> Examples of arithmetic and statistical functions</a></li>
<li class="chapter" data-level="2.4.4" data-path="basics.html"><a href="basics.html#missing-and-infinite-values"><i class="fa fa-check"></i><b>2.4.4</b> Missing and infinite values</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="basics.html"><a href="basics.html#indexing"><i class="fa fa-check"></i><b>2.5</b> Indexing</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="basics.html"><a href="basics.html#index-df"><i class="fa fa-check"></i><b>2.5.1</b> Indexing and subsetting data frames</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="basics.html"><a href="basics.html#the-tidyverse-grammar"><i class="fa fa-check"></i><b>2.6</b> The <code>tidyverse</code> grammar</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="basics.html"><a href="basics.html#pipes-and-the-operator"><i class="fa fa-check"></i><b>2.6.1</b> Pipes and the <code>%&gt;%</code> operator</a></li>
<li class="chapter" data-level="2.6.2" data-path="basics.html"><a href="basics.html#subsetting-data-frames-in-tidyverse"><i class="fa fa-check"></i><b>2.6.2</b> Subsetting data frames in <code>tidyverse</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="represent.html"><a href="represent.html"><i class="fa fa-check"></i><b>3</b> Representing and visualizing ego-networks</a>
<ul>
<li class="chapter" data-level="3.1" data-path="represent.html"><a href="represent.html#overview-1"><i class="fa fa-check"></i><b>3.1</b> Overview</a></li>
<li class="chapter" data-level="3.2" data-path="represent.html"><a href="represent.html#egocentric-data"><i class="fa fa-check"></i><b>3.2</b> Ego-level and alter-level data</a></li>
<li class="chapter" data-level="3.3" data-path="represent.html"><a href="represent.html#networks-in-r"><i class="fa fa-check"></i><b>3.3</b> Networks in R</a></li>
<li class="chapter" data-level="3.4" data-path="represent.html"><a href="represent.html#ego-networks-as-igraph-objects"><i class="fa fa-check"></i><b>3.4</b> Ego-networks as <code>igraph</code> objects</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="composition.html"><a href="composition.html"><i class="fa fa-check"></i><b>4</b> Ego-network composition</a>
<ul>
<li class="chapter" data-level="4.1" data-path="composition.html"><a href="composition.html#overview-2"><i class="fa fa-check"></i><b>4.1</b> Overview</a></li>
<li class="chapter" data-level="4.2" data-path="composition.html"><a href="composition.html#measures-of-ego-network-composition"><i class="fa fa-check"></i><b>4.2</b> Measures of ego-network composition</a></li>
<li class="chapter" data-level="4.3" data-path="composition.html"><a href="composition.html#comp-many"><i class="fa fa-check"></i><b>4.3</b> Analyzing the composition of many ego-networks</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="composition.html"><a href="composition.html#split-apply-combine-in-egocentric-network-analysis"><i class="fa fa-check"></i><b>4.3.1</b> Split-apply-combine in egocentric network analysis</a></li>
<li class="chapter" data-level="4.3.2" data-path="composition.html"><a href="composition.html#summarize-dplyr"><i class="fa fa-check"></i><b>4.3.2</b> Grouping and summarizing with <code>dplyr</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="structure.html"><a href="structure.html"><i class="fa fa-check"></i><b>5</b> Ego-network structure</a>
<ul>
<li class="chapter" data-level="5.1" data-path="structure.html"><a href="structure.html#overview-3"><i class="fa fa-check"></i><b>5.1</b> Overview</a></li>
<li class="chapter" data-level="5.2" data-path="structure.html"><a href="structure.html#measures-of-ego-network-structure"><i class="fa fa-check"></i><b>5.2</b> Measures of ego-network structure</a></li>
<li class="chapter" data-level="5.3" data-path="structure.html"><a href="structure.html#lists"><i class="fa fa-check"></i><b>5.3</b> R lists</a></li>
<li class="chapter" data-level="5.4" data-path="structure.html"><a href="structure.html#apply-purrr"><i class="fa fa-check"></i><b>5.4</b> Analyzing the structure of many ego-networks</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="multilevel.html"><a href="multilevel.html"><i class="fa fa-check"></i><b>6</b> Multilevel modeling of ego-network data</a>
<ul>
<li class="chapter" data-level="6.1" data-path="multilevel.html"><a href="multilevel.html#overview-4"><i class="fa fa-check"></i><b>6.1</b> Overview</a></li>
<li class="chapter" data-level="6.2" data-path="multilevel.html"><a href="multilevel.html#prepare-the-data"><i class="fa fa-check"></i><b>6.2</b> Prepare the data</a></li>
<li class="chapter" data-level="6.3" data-path="multilevel.html"><a href="multilevel.html#random-intercept-models"><i class="fa fa-check"></i><b>6.3</b> Random intercept models</a></li>
<li class="chapter" data-level="6.4" data-path="multilevel.html"><a href="multilevel.html#random-slope-models"><i class="fa fa-check"></i><b>6.4</b> Random slope models</a></li>
<li class="chapter" data-level="6.5" data-path="multilevel.html"><a href="multilevel.html#tests-of-significance"><i class="fa fa-check"></i><b>6.5</b> Tests of significance</a></li>
<li class="chapter" data-level="6.6" data-path="multilevel.html"><a href="multilevel.html#further-readings"><i class="fa fa-check"></i><b>6.6</b> Further readings</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="egor.html"><a href="egor.html"><i class="fa fa-check"></i><b>7</b> The <code>egor</code> package</a>
<ul>
<li class="chapter" data-level="7.1" data-path="egor.html"><a href="egor.html#egor-import"><i class="fa fa-check"></i><b>7.1</b> Importing ego-network data</a></li>
<li class="chapter" data-level="7.2" data-path="egor.html"><a href="egor.html#analyzing-and-visualizing-ego-network-data"><i class="fa fa-check"></i><b>7.2</b> Analyzing and visualizing ego-network data</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="supplementary.html"><a href="supplementary.html"><i class="fa fa-check"></i><b>8</b> Supplementary topics</a>
<ul>
<li class="chapter" data-level="8.1" data-path="supplementary.html"><a href="supplementary.html#more-r-programming-topics"><i class="fa fa-check"></i><b>8.1</b> More R programming topics</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="supplementary.html"><a href="supplementary.html#types-and-classes-of-objects"><i class="fa fa-check"></i><b>8.1.1</b> Types and classes of objects</a></li>
<li class="chapter" data-level="8.1.2" data-path="supplementary.html"><a href="supplementary.html#functions"><i class="fa fa-check"></i><b>8.1.2</b> Writing your own R functions</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="supplementary.html"><a href="supplementary.html#import-igraph"><i class="fa fa-check"></i><b>8.2</b> Importing ego-network data with <code>igraph</code> and <code>tidyverse</code></a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="supplementary.html"><a href="supplementary.html#importing-data-for-one-ego-network"><i class="fa fa-check"></i><b>8.2.1</b> Importing data for one ego-network</a></li>
<li class="chapter" data-level="8.2.2" data-path="supplementary.html"><a href="supplementary.html#importing-data-on-many-ego-networks-as-data-frames-and-lists"><i class="fa fa-check"></i><b>8.2.2</b> Importing data on many ego-networks as data frames and lists</a></li>
<li class="chapter" data-level="8.2.3" data-path="supplementary.html"><a href="supplementary.html#creating-lists-of-ego-networks-as-igraph-objects-with-purrr"><i class="fa fa-check"></i><b>8.2.3</b> Creating lists of ego-networks as <code>igraph</code> objects with <code>purrr</code></a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="supplementary.html"><a href="supplementary.html#more-igraph"><i class="fa fa-check"></i><b>8.3</b> More operations with <code>igraph</code></a></li>
<li class="chapter" data-level="8.4" data-path="supplementary.html"><a href="supplementary.html#statnet"><i class="fa fa-check"></i><b>8.4</b> The <code>statnet</code> suite of packages</a></li>
<li class="chapter" data-level="8.5" data-path="supplementary.html"><a href="supplementary.html#illustrative-example-personal-networks-of-sri-lankan-immigrants-in-italy"><i class="fa fa-check"></i><b>8.5</b> Illustrative example: personal networks of Sri Lankan immigrants in Italy</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Egocentric network analysis with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="represent" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Representing and visualizing ego-networks<a href="represent.html#represent" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="overview-1" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Overview<a href="represent.html#overview-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>After learning some basics of the R language, we now focus on R tools for egocentric network data. To make things simpler, we’ll start by considering just one egocentric network. The following chapters will show you how to replicate the same type of analysis on many ego-networks at once.</p>
<p>This chapter covers the following topics:</p>
<ul>
<li>Representing ego-level attribute data and alter-level attribute data in R.</li>
<li>Joining (merging) ego-level and alter-level data frames.</li>
<li>Representing alter-alter tie data.</li>
<li>Representing and manipulating an ego-network as an <code>igraph</code> object.</li>
<li>Visualizing an ego-network.</li>
</ul>
<hr />
</div>
<div id="egocentric-data" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Ego-level and alter-level data<a href="represent.html#egocentric-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>In this section we use the data objects described earlier in Section <a href="index.html#data">1.4</a>. All these objects are stored in the <code>data.rda</code> file. In sections <a href="egor.html#egor-import">7.1</a> and <a href="supplementary.html#import-igraph">8.2</a> we’ll show how to create these objects from raw (csv) data using <code>egor</code> and <code>tidyverse</code>.</li>
<li>Egocentric network data typically include at least three types of data:
<ul>
<li><strong>Ego-level attribute data</strong>. This is a dataset with attributes of egos. Each row is an ego (typically, a survey respondent) and each column is a characteristic of the ego. Following multilevel modeling terminology, we call this “level 2” because, in the multilevel structure of ego-network data, egos are the higher-level “groups” in which alters are clustered. In personal network surveys, these data are obtained from standard survey questions asking individual information about the respondent.</li>
<li><strong>Alter-level attribute data</strong>. This is a dataset with attributes of alters and of ego-alter ties. It is also the dataset that, for each alter, indicates who is the ego who nominated that alter: that is, it lists all the ego-alter ties. In this dataset, each row is an alter and each column is a characteristic of the alter, or of the relationship between the alter and the ego who nominated him/her. Following multilevel modeling terminology, we call this “level 1” because alters are the most granular units in the data, clustered within egos. In personal network surveys, these data are obtained from the so-called <em>name generator</em> questions, which elicit lists of alters from each ego; and from the <em>name interpreter</em> questions, which elicit characteristics of each alter.</li>
<li><strong>Alter-alter tie data</strong>. These are the data about alter-alter ties as reported by the ego. In personal network surveys, these data are obtained from so-called <em>edge interpreter</em> questions.</li>
</ul></li>
<li><strong>File formats:</strong>
<ul>
<li>Ego-level attribute data. This is normally a single dataset (in a single file), with each row representing one ego, and different columns representing different ego-level attributes. This is similar to any respondent-level dataset you have in standard survey data.</li>
<li>Alter-level attribute data. Depending on the data collection software, you might have a single dataset (in a single file) including alters nominated by all egos; or separate datasets (in separate files), one for each ego, with the alters nominated by that ego (and with the same variables in all datasets).</li>
<li>Alter-alter tie data. These are typically in edge list format or in adjacency matrix format, depending on the data collection software. If the tie data are in adjacency matrices, you normally have a separate adjacency matrix for each ego, in a separate file. If they are in edge lists, you might have a single edge list including alters from all egos (with an additional column indicating the ego that nominated the two alters), or a separate edge list (in a separate file) for each ego.</li>
</ul></li>
<li>The data format described above works well because, in standard egocentric data, the different ego-networks are <strong>separate</strong> (non-overlapping). This means that an alter can only “belong” to one and one only ego, and alter-alter ties only exist between alters nominated by the same egos. In other words, there are no links or overlaps between the networks of different egos.
<ul>
<li>In particular, this means that there is a one-to-one correspondence between alters and ego-alter ties: for each ego-alter tie there is only one alter, and vice versa (so the level of alters is the same as the level of ego-alter ties).</li>
</ul></li>
<li>In egocentric analysis you are frequently switching between level 1 and 2, and <strong>joining</strong> information from the two levels.</li>
<li><strong>Level-1 join.</strong> Bring information from level 2 into the level-1 dataset.
<ul>
<li>For certain types of analysis you need to join ego attributes (level 2) into an alter-level data set (level 1).</li>
<li>For example, you need to do this when estimating multilevel models in which the dependent variable is a characteristic of ego-alter ties (e.g., if the tie provides support), and some of the predictors are ego-level characteristics (e.g., gender of the ego).</li>
<li>Because there is one ego for multiple alters, this is a one-to-many join, with the same value of an ego attribute (one ego row in the level-2 dataset) being joined to multiple alters (multiple alter rows in the level-1 dataset).</li>
<li>The data frames are joined by ego ID.</li>
</ul></li>
<li><strong>Level-2 join.</strong> Bring information from level 1 into the level-2 dataset.
<ul>
<li>In other cases you want to join alter attributes (level 1) into an ego-level dataset (level 2).</li>
<li>For example, you need to do this when you want to analyze summary measures of ego-network characteristics (e.g. average age of alters) among the egos.</li>
<li>Because there are multiple alters for one ego, this requires that you first summarize or aggregate the alter attributes for each ego.</li>
<li>If you have <em>continuous</em> alter attributes, you typically summarize them by taking averages and dispersion measures (variance, standard deviation, etc.) of the alter attribute for each ego: for example, average alter age for each ego, or standard deviation of contact frequency between alters and each ego.</li>
<li>If you have <em>categorical</em> alter attributes, you normally summarize them by taking counts or proportions of certain categories, or qualitative diversity measures (e.g., generalized variance, entropy): for example, proportion of women, or ethnic diversity in each ego’s network.</li>
<li>Once you have these summary variables on ego-network <em>composition</em>, you can join them with an ego-level dataset by ego ID.</li>
<li>The level-2 join can also involve summary variables on ego-network <em>structure</em>: for example, average alter degree, ego-network density, or number of components. These variables can be joined with an ego-level dataset by ego ID.</li>
<li>We’ll consider this type of ego-level summarization and the level-2 join in Chapters <a href="composition.html#composition">4</a> and <a href="structure.html#structure">5</a> about measures of ego-network composition and structure.</li>
</ul></li>
<li>In base R, data frames can be joined using the <code>merge</code> function. However, we use the <code>dplyr</code> join functions, whose code is more efficient and readable:
<ul>
<li><code>left_join()</code> retains all rows in the <em>left</em> data frame, and discards any row in the right data frame that does not have a match with a row in the left data frame.</li>
<li><code>right_join()</code> retains all rows in the <em>right</em> data frame, and discards any row in the left data frame that does not have a match with a row in the right data frame.</li>
<li><code>full_join()</code> retains all rows from both data frames.</li>
</ul></li>
<li>McCarty and colleagues (2019) provide a more detailed discussion of all types of egocentric network data, levels in egocentric data, and switching and joining operations between levels.</li>
<li><strong>What we do in the following code</strong>.
<ul>
<li>View ego-level data (level 2) and alter-level data (level 1) as stored in R data frames.</li>
<li>Do the level-1 join: Bring ego attributes into an alter-level data frame.</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="represent.html#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load packages.</span></span>
<span id="cb162-2"><a href="represent.html#cb162-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb162-3"><a href="represent.html#cb162-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-4"><a href="represent.html#cb162-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Load data.</span></span>
<span id="cb162-5"><a href="represent.html#cb162-5" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;./Data/data.rda&quot;</span>)</span>
<span id="cb162-6"><a href="represent.html#cb162-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-7"><a href="represent.html#cb162-7" aria-hidden="true" tabindex="-1"></a><span class="co"># The file we just loaded includes the following objects.</span></span>
<span id="cb162-8"><a href="represent.html#cb162-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-9"><a href="represent.html#cb162-9" aria-hidden="true" tabindex="-1"></a><span class="co"># * Ego-level attribute data</span></span>
<span id="cb162-10"><a href="represent.html#cb162-10" aria-hidden="true" tabindex="-1"></a>ego.df</span></code></pre></div>
<pre><code>## # A tibble: 102 × 9
##    ego_ID ego.sex ego.age ego.arr ego.edu   ego.inc  empl ego.empl.bin ego.age…¹
##     &lt;dbl&gt; &lt;fct&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;fct&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;        &lt;fct&gt;    
##  1     28 Male         61    2008 Secondary     350     3 Yes          60+      
##  2     29 Male         38    2000 Primary       900     4 Yes          36-40    
##  3     33 Male         30    2010 Primary       200     3 Yes          26-30    
##  4     35 Male         25    2009 Secondary    1000     3 Yes          18-25    
##  5     39 Male         29    2007 Primary         0     1 No           26-30    
##  6     40 Male         56    2008 Secondary     950     4 Yes          51-60    
##  7     45 Male         52    1975 Primary      1600     3 Yes          51-60    
##  8     46 Male         35    2002 Secondary    1200     4 Yes          31-35    
##  9     47 Male         22    2010 Secondary     700     4 Yes          18-25    
## 10     48 Male         51    2007 Primary       950     4 Yes          51-60    
## # … with 92 more rows, and abbreviated variable name ¹​ego.age.cat</code></pre>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="represent.html#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="co"># * Attribute data for alters and ego-alter ties (all alters and ego-alter ties </span></span>
<span id="cb164-2"><a href="represent.html#cb164-2" aria-hidden="true" tabindex="-1"></a><span class="co"># in one data frame). </span></span>
<span id="cb164-3"><a href="represent.html#cb164-3" aria-hidden="true" tabindex="-1"></a>alter.attr.all</span></code></pre></div>
<pre><code>## # A tibble: 4,590 × 12
##    alter_ID ego_ID alter_num alter.sex alter.a…¹ alter…² alter…³ alter…⁴ alter…⁵
##       &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt; &lt;fct&gt;     &lt;fct&gt;     &lt;fct&gt;   &lt;fct&gt;   &lt;fct&gt;     &lt;dbl&gt;
##  1     2801     28         1 Female    51-60     Close … Sri La… Sri La…      NA
##  2     2802     28         2 Male      51-60     Other … Sri La… Sri La…       3
##  3     2803     28         3 Male      51-60     Close … Sri La… Sri La…      NA
##  4     2804     28         4 Male      60+       Close … Sri La… Sri La…      NA
##  5     2805     28         5 Female    41-50     Close … Sri La… Sri La…      NA
##  6     2806     28         6 Female    60+       Close … Sri La… Sri La…      NA
##  7     2807     28         7 Male      41-50     Other … Sri La… Sri La…       5
##  8     2808     28         8 Female    36-40     Other … Sri La… Sri La…       4
##  9     2809     28         9 Female    51-60     Other … Sri La… Sri La…       5
## 10     2810     28        10 Male      60+       Other … Sri La… Sri La…       5
## # … with 4,580 more rows, 3 more variables: alter.loan &lt;fct&gt;, alter.fam &lt;fct&gt;,
## #   alter.age &lt;dbl&gt;, and abbreviated variable names ¹​alter.age.cat, ²​alter.rel,
## #   ³​alter.nat, ⁴​alter.res, ⁵​alter.clo</code></pre>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="represent.html#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Level-1 join: Ego attributes into alter-level data (one to many).</span></span>
<span id="cb166-2"><a href="represent.html#cb166-2" aria-hidden="true" tabindex="-1"></a>(data <span class="ot">&lt;-</span> <span class="fu">left_join</span>(alter.attr.all, ego.df, <span class="at">by=</span> <span class="st">&quot;ego_ID&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 4,590 × 20
##    alter_ID ego_ID alter_num alter.sex alter.a…¹ alter…² alter…³ alter…⁴ alter…⁵
##       &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt; &lt;fct&gt;     &lt;fct&gt;     &lt;fct&gt;   &lt;fct&gt;   &lt;fct&gt;     &lt;dbl&gt;
##  1     2801     28         1 Female    51-60     Close … Sri La… Sri La…      NA
##  2     2802     28         2 Male      51-60     Other … Sri La… Sri La…       3
##  3     2803     28         3 Male      51-60     Close … Sri La… Sri La…      NA
##  4     2804     28         4 Male      60+       Close … Sri La… Sri La…      NA
##  5     2805     28         5 Female    41-50     Close … Sri La… Sri La…      NA
##  6     2806     28         6 Female    60+       Close … Sri La… Sri La…      NA
##  7     2807     28         7 Male      41-50     Other … Sri La… Sri La…       5
##  8     2808     28         8 Female    36-40     Other … Sri La… Sri La…       4
##  9     2809     28         9 Female    51-60     Other … Sri La… Sri La…       5
## 10     2810     28        10 Male      60+       Other … Sri La… Sri La…       5
## # … with 4,580 more rows, 11 more variables: alter.loan &lt;fct&gt;, alter.fam &lt;fct&gt;,
## #   alter.age &lt;dbl&gt;, ego.sex &lt;fct&gt;, ego.age &lt;dbl&gt;, ego.arr &lt;dbl&gt;,
## #   ego.edu &lt;fct&gt;, ego.inc &lt;dbl&gt;, empl &lt;dbl&gt;, ego.empl.bin &lt;fct&gt;,
## #   ego.age.cat &lt;fct&gt;, and abbreviated variable names ¹​alter.age.cat,
## #   ²​alter.rel, ³​alter.nat, ⁴​alter.res, ⁵​alter.clo</code></pre>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="represent.html#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Note that the new data frame has one row for each alter, and the same ego ID</span></span>
<span id="cb168-2"><a href="represent.html#cb168-2" aria-hidden="true" tabindex="-1"></a><span class="co"># and ego attribute value is repeated for all alters belonging to the same ego.</span></span>
<span id="cb168-3"><a href="represent.html#cb168-3" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb168-4"><a href="represent.html#cb168-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(alter_ID, ego_ID, ego.age, ego.edu)</span></code></pre></div>
<pre><code>## # A tibble: 4,590 × 4
##    alter_ID ego_ID ego.age ego.edu  
##       &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;fct&gt;    
##  1     2801     28      61 Secondary
##  2     2802     28      61 Secondary
##  3     2803     28      61 Secondary
##  4     2804     28      61 Secondary
##  5     2805     28      61 Secondary
##  6     2806     28      61 Secondary
##  7     2807     28      61 Secondary
##  8     2808     28      61 Secondary
##  9     2809     28      61 Secondary
## 10     2810     28      61 Secondary
## # … with 4,580 more rows</code></pre>
</div>
<div id="networks-in-r" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Networks in R<a href="represent.html#networks-in-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>There are several packages for network analysis in R. The two main (collections of) R network packages are <code>igraph</code> and <code>statnet</code>. <code>igraph</code> is a single package. It represents networks as objects of class <code>igraph</code>. <code>statnet</code> is not a package, it’s a collection of packages. It represents networks as objects of class <code>network</code>.</li>
<li><code>igraph</code> and <code>statnet</code> are in part overlapping, in part complementary. Historically, <code>igraph</code> has focused more on network methods developed in computer science and physics, while <code>statnet</code> has emphasized network methods developed in statistics and the social sciences. Many things can be done in <em>both</em> <code>igraph</code> and <code>statnet</code>: basic network creation, importing network data, network manipulation, basic network metrics such as centrality, and network visualization. On the other hand, a few things can only be done in <code>igraph</code> (e.g., “community detection” algorithms and modularity analysis), and others can only be done in <code>statnet</code> (e.g., ERGMs).</li>
<li>Most of this workshop uses the package <code>igraph</code>. This is because I personally find <code>igraph</code>’s syntax more intuitive for beginners, especially for simple operations on networks. In Chapter <a href="supplementary.html#statnet">8.4</a> we’ll also briefly demonstrate how networks are represented in <code>statnet</code>’s <code>network</code> objects. You should keep in mind that everything we’ll do here with <code>igraph</code>, can also be done with <code>statnet</code>. In general, you’ll need to learn about <code>statnet</code> too if you want to master a complete toolkit for social network analysis with R.</li>
<li>We’ll also briefly use the <code>ggraph</code> package for network visualization and the <code>tidygraph</code> package for easier display and manipulation of networks. We don’t have time to go into much detail about these two packages, but you can find more tutorials and learning resources about them online.
<ul>
<li><code>ggraph</code> flexible and easy tools for network visualization by applying the <a href="https://ggplot2.tidyverse.org/"><code>ggplot2</code> grammar</a> of graphics to network data (learn more <a href="https://github.com/thomasp85/ggraph">here</a>). In addition to <code>ggraph</code>, you can also visualize networks with <code>igraph</code>, which uses base R plotting (see Section <a href="supplementary.html#more-igraph">8.3</a>).</li>
<li><code>tidygraph</code> applies the <code>tidyverse</code> principles of <a href="https://r4ds.had.co.nz/tidy-data.html">tidy data</a> to networks. This allows you to easily view and manipulate the basic components of network data in tabular format, i.e., edge data as an edge list and node attribute data as a case-by-variable dataset. More information about <code>tidygraph</code> is <a href="https://www.data-imaginist.com/2017/introducing-tidygraph/">here</a>.</li>
</ul></li>
</ul>
</div>
<div id="ego-networks-as-igraph-objects" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Ego-networks as <code>igraph</code> objects<a href="represent.html#ego-networks-as-igraph-objects" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>In <code>igraph</code>, networks are called <strong>graphs</strong> and are represented by objects of class <code>igraph</code>. Nodes are called <strong>vertices</strong> and ties are called <strong>edges</strong>.</li>
<li>Given an igraph object <code>gr</code>:
<ul>
<li><code>V(gr)</code> shows you the graph vertices (identified by <code>name</code>, if they have a <code>name</code> attribute, or by integers otherwise). This is an object of class <em>vertex sequence</em> (<code>igraph.vs</code>).</li>
<li><code>E(gr)</code> shows you the graph edges. This is an object of class <em>edge sequence</em> (<code>igraph.es</code>).</li>
</ul></li>
<li>Vertices, edges and graphs have <strong>attributes</strong>. You can import them from external data files, or you can set them manually in R. If you import data into an <code>igraph</code> object with a vertex attribute called “age”, an edge attribute called “strength”, and a graph attribute called “size”, then
<ul>
<li><code>V(gr)$age</code> returns the vertex attribute <code>age</code> as a vector;</li>
<li><code>E(gr)$strength</code> returns the edge attribute <code>strength</code> as a vector;</li>
<li><code>gr$size</code> returns the graph attribute <code>size</code>.</li>
</ul></li>
<li><code>print</code>ing an <code>igraph</code> object returns some <strong>summary information</strong> about the network. This includes the counts of vertices and edges, and whether the network is directed, named (i.e. if vertices have a <code>name</code> attribute), weighted (i.e. if edges have a <code>weight</code> attribute), or bipartite (also called two-mode).</li>
<li><strong>Querying vertices and edges</strong>
<ul>
<li>Based on attributes. You can query vertices and edges with specific characteristics (attribute values), and save them for re-use. E.g. <code>V(gr)[age=30]</code> returns all vertices whose <code>age</code> attribute equals 30; <code>E(gr)[strength=1]</code> returns all edges whose strength is 1.</li>
<li>Based on network structure. The <code>V(gr)[...]</code> and <code>E(gr)[...]</code> syntax can also be used with specific functions that extract information on tie distribution: for example, to query all vertices that are adjacent to a given vertex <em>i</em>, or all edges between two particular subsets of vertices. The main functions here are <code>nei()</code>, <code>inc()</code> and <code>%--%</code> (see code below).</li>
<li>More information on useful igraph syntax for vertex and edge indexing is <a href="http://igraph.org/r/doc/igraph-vs-indexing.html">here</a> (vertex indexing) and <a href="http://igraph.org/r/doc/igraph-es-indexing.html">here</a> (edge indexing).</li>
</ul></li>
<li><strong>What we do in the following code</strong>.
<ul>
<li>View an ego-network as an <code>igraph</code> object.</li>
<li>View vertex and edge attributes in an ego-network.</li>
<li>Obtain descriptive statistics for attributes of alters (vertex attributes) and alter-alter ties (edge attributes) in the ego-network.</li>
<li>Visualize an ego-network with <code>ggraph</code>, setting aesthetic parameters based on alter attributes.</li>
<li>Query vertices and edges based on attributes.</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="represent.html#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load packages.</span></span>
<span id="cb170-2"><a href="represent.html#cb170-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph)</span>
<span id="cb170-3"><a href="represent.html#cb170-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggraph)</span>
<span id="cb170-4"><a href="represent.html#cb170-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidygraph)</span>
<span id="cb170-5"><a href="represent.html#cb170-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(skimr)</span>
<span id="cb170-6"><a href="represent.html#cb170-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb170-7"><a href="represent.html#cb170-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-8"><a href="represent.html#cb170-8" aria-hidden="true" tabindex="-1"></a><span class="co"># The data.rda file, which we loaded earlier, also includes the ego-network of </span></span>
<span id="cb170-9"><a href="represent.html#cb170-9" aria-hidden="true" tabindex="-1"></a><span class="co"># ego 28 (as igraph object)</span></span>
<span id="cb170-10"><a href="represent.html#cb170-10" aria-hidden="true" tabindex="-1"></a>gr<span class="fl">.28</span></span></code></pre></div>
<pre><code>## IGRAPH 9f6fff1 UNW- 45 259 -- 
## + attr: .egoID (g/n), ego_ID (g/c), name (v/c), alter_num (v/n),
## | alter.sex (v/c), alter.age.cat (v/c), alter.rel (v/c), alter.nat
## | (v/c), alter.res (v/c), alter.clo (v/n), alter.loan (v/c), alter.fam
## | (v/c), alter.age (v/n), weight (e/n)
## + edges from 9f6fff1 (vertex names):
##  [1] 2801--2802 2801--2803 2801--2804 2801--2805 2801--2806 2801--2807
##  [7] 2801--2808 2801--2809 2801--2810 2801--2811 2801--2812 2801--2813
## [13] 2801--2814 2801--2815 2801--2818 2801--2820 2801--2823 2801--2825
## [19] 2801--2827 2801--2828 2801--2829 2801--2831 2801--2840 2801--2841
## [25] 2802--2803 2802--2804 2802--2805 2802--2806 2802--2807 2802--2808
## + ... omitted several edges</code></pre>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="represent.html#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The graph is Undirected, Named, Weighted. It has 45 vertices and 259 edges. It</span></span>
<span id="cb172-2"><a href="represent.html#cb172-2" aria-hidden="true" tabindex="-1"></a><span class="co"># has a vertex attribute called &quot;name&quot;, and an edge attribute called &quot;weight&quot;. </span></span>
<span id="cb172-3"><a href="represent.html#cb172-3" aria-hidden="true" tabindex="-1"></a><span class="co"># We see several vertex attributes (see codebook.xlsx for their meaning).</span></span>
<span id="cb172-4"><a href="represent.html#cb172-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb172-5"><a href="represent.html#cb172-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Let&#39;s reassign it to a new, generic object name. This makes the code more </span></span>
<span id="cb172-6"><a href="represent.html#cb172-6" aria-hidden="true" tabindex="-1"></a><span class="co"># generic and more easily re-usable on any ego-network igraph object </span></span>
<span id="cb172-7"><a href="represent.html#cb172-7" aria-hidden="true" tabindex="-1"></a><span class="co"># (of any ego ID).</span></span>
<span id="cb172-8"><a href="represent.html#cb172-8" aria-hidden="true" tabindex="-1"></a>gr <span class="ot">&lt;-</span> gr<span class="fl">.28</span></span>
<span id="cb172-9"><a href="represent.html#cb172-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb172-10"><a href="represent.html#cb172-10" aria-hidden="true" tabindex="-1"></a><span class="co"># We also have the same network, with ego included: note the different number</span></span>
<span id="cb172-11"><a href="represent.html#cb172-11" aria-hidden="true" tabindex="-1"></a><span class="co"># of vertices and edges compared to the previous graph.</span></span>
<span id="cb172-12"><a href="represent.html#cb172-12" aria-hidden="true" tabindex="-1"></a>gr.ego<span class="fl">.28</span></span></code></pre></div>
<pre><code>## IGRAPH 9eafe67 UNW- 46 304 -- 
## + attr: .egoID (g/n), ego_ID (g/c), name (v/c), alter_num (v/n),
## | alter.sex (v/c), alter.age.cat (v/c), alter.rel (v/c), alter.nat
## | (v/c), alter.res (v/c), alter.clo (v/n), alter.loan (v/c), alter.fam
## | (v/c), alter.age (v/n), weight (e/n)
## + edges from 9eafe67 (vertex names):
##  [1] 2801--2802 2801--2803 2801--2804 2801--2805 2801--2806 2801--2807
##  [7] 2801--2808 2801--2809 2801--2810 2801--2811 2801--2812 2801--2813
## [13] 2801--2814 2801--2815 2801--2818 2801--2820 2801--2823 2801--2825
## [19] 2801--2827 2801--2828 2801--2829 2801--2831 2801--2840 2801--2841
## [25] 2802--2803 2802--2804 2802--2805 2802--2806 2802--2807 2802--2808
## + ... omitted several edges</code></pre>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="represent.html#cb174-1" aria-hidden="true" tabindex="-1"></a>gr.ego <span class="ot">&lt;-</span> gr.ego<span class="fl">.28</span></span>
<span id="cb174-2"><a href="represent.html#cb174-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-3"><a href="represent.html#cb174-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the graph. Note that ego is not included.</span></span>
<span id="cb174-4"><a href="represent.html#cb174-4" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">607</span>)</span>
<span id="cb174-5"><a href="represent.html#cb174-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(gr) <span class="sc">+</span> </span>
<span id="cb174-6"><a href="represent.html#cb174-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_edge_link</span>() <span class="sc">+</span> <span class="co"># Draw edges</span></span>
<span id="cb174-7"><a href="represent.html#cb174-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_point</span>(<span class="at">size=</span><span class="dv">5</span>, <span class="at">color=</span><span class="st">&quot;blue&quot;</span>) <span class="sc">+</span> <span class="co"># Draw nodes</span></span>
<span id="cb174-8"><a href="represent.html#cb174-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_graph</span>(<span class="at">base_family =</span> <span class="st">&#39;Helvetica&#39;</span>) <span class="co"># Set graph theme and font</span></span></code></pre></div>
<p><img src="Egocentric_R_bookdown_files/figure-html/igraph-1.png" width="60%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="represent.html#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="co"># An igraph object can be indexed as an adjacency matrix.</span></span>
<span id="cb175-2"><a href="represent.html#cb175-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb175-3"><a href="represent.html#cb175-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjacency row of alter #3.</span></span>
<span id="cb175-4"><a href="represent.html#cb175-4" aria-hidden="true" tabindex="-1"></a>gr[<span class="dv">3</span>,]</span></code></pre></div>
<pre><code>## 2801 2802 2803 2804 2805 2806 2807 2808 2809 2810 2811 2812 2813 2814 2815 2816 
##    1    1    0    1    1    1    1    1    1    1    1    1    0    0    0    0 
## 2817 2818 2819 2820 2821 2822 2823 2824 2825 2826 2827 2828 2829 2830 2831 2832 
##    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0 
## 2833 2834 2835 2836 2837 2838 2839 2840 2841 2842 2843 2844 2845 
##    0    0    0    0    0    0    0    1    1    0    0    0    0</code></pre>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="represent.html#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjacency row of alter with vertex name (alter ID) &quot;2805&quot;.</span></span>
<span id="cb177-2"><a href="represent.html#cb177-2" aria-hidden="true" tabindex="-1"></a>gr[<span class="st">&quot;2805&quot;</span>,]</span></code></pre></div>
<pre><code>## 2801 2802 2803 2804 2805 2806 2807 2808 2809 2810 2811 2812 2813 2814 2815 2816 
##    1    1    1    1    0    1    1    1    1    1    1    0    0    0    0    0 
## 2817 2818 2819 2820 2821 2822 2823 2824 2825 2826 2827 2828 2829 2830 2831 2832 
##    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0    0 
## 2833 2834 2835 2836 2837 2838 2839 2840 2841 2842 2843 2844 2845 
##    0    0    0    0    0    0    0    1    1    0    0    0    0</code></pre>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="represent.html#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjacency columns of alters 3-5</span></span>
<span id="cb179-2"><a href="represent.html#cb179-2" aria-hidden="true" tabindex="-1"></a>gr[,<span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>]</span></code></pre></div>
<pre><code>## 45 x 3 sparse Matrix of class &quot;dgCMatrix&quot;
##      2803 2804 2805
## 2801    1    1    1
## 2802    1    1    1
## 2803    .    1    1
## 2804    1    .    1
## 2805    1    1    .
## 2806    1    1    1
## 2807    1    1    1
## 2808    1    1    1
## 2809    1    1    1
## 2810    1    1    1
## 2811    1    2    1
## 2812    1    .    .
## 2813    .    .    .
## 2814    .    .    .
## 2815    .    .    .
## 2816    .    .    .
## 2817    .    .    .
## 2818    .    .    .
## 2819    .    .    .
## 2820    .    .    .
## 2821    .    .    .
## 2822    .    .    .
## 2823    .    .    .
## 2824    .    .    .
## 2825    .    .    .
## 2826    .    .    .
## 2827    .    .    .
## 2828    .    .    .
## 2829    .    .    .
## 2830    .    .    .
## 2831    .    .    .
## 2832    .    .    .
## 2833    .    .    .
## 2834    .    .    .
## 2835    .    .    .
## 2836    .    .    .
## 2837    .    .    .
## 2838    .    .    .
## 2839    .    .    .
## 2840    1    2    1
## 2841    1    1    1
## 2842    .    .    .
## 2843    .    .    .
## 2844    .    .    .
## 2845    .    .    .</code></pre>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="represent.html#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert and view the ego-network as a tidygraph object: you can now see the </span></span>
<span id="cb181-2"><a href="represent.html#cb181-2" aria-hidden="true" tabindex="-1"></a><span class="co"># attribute data and edge list as tabular datasets.</span></span>
<span id="cb181-3"><a href="represent.html#cb181-3" aria-hidden="true" tabindex="-1"></a>(gr.tbl <span class="ot">&lt;-</span> <span class="fu">as_tbl_graph</span>(gr))</span></code></pre></div>
<pre><code>## # A tbl_graph: 45 nodes and 259 edges
## #
## # An undirected simple graph with 1 component
## #
## # Node Data: 45 × 11 (active)
##   name  alter_… alter.… alter.… alter.… alter.… alter.… alter.… alter.… alter.…
##   &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;  
## 1 2801        1 Female  51-60   Close … Sri La… Sri La…      NA &lt;NA&gt;    Yes    
## 2 2802        2 Male    51-60   Other … Sri La… Sri La…       3 No      Yes    
## 3 2803        3 Male    51-60   Close … Sri La… Sri La…      NA &lt;NA&gt;    Yes    
## 4 2804        4 Male    60+     Close … Sri La… Sri La…      NA &lt;NA&gt;    Yes    
## 5 2805        5 Female  41-50   Close … Sri La… Sri La…      NA &lt;NA&gt;    Yes    
## 6 2806        6 Female  60+     Close … Sri La… Sri La…      NA &lt;NA&gt;    Yes    
## # … with 39 more rows, and 1 more variable: alter.age &lt;dbl&gt;
## #
## # Edge Data: 259 × 3
##    from    to weight
##   &lt;int&gt; &lt;int&gt;  &lt;dbl&gt;
## 1     1     2      1
## 2     1     3      1
## 3     1     4      1
## # … with 256 more rows</code></pre>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="represent.html#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Vertex and edge sequences and attributes                                  ----</span></span>
<span id="cb183-2"><a href="represent.html#cb183-2" aria-hidden="true" tabindex="-1"></a><span class="co"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - </span></span>
<span id="cb183-3"><a href="represent.html#cb183-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-4"><a href="represent.html#cb183-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Vertex sequences and edge sequences can be extracted from a graph.</span></span>
<span id="cb183-5"><a href="represent.html#cb183-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-6"><a href="represent.html#cb183-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Vertex sequence of the whole graph. Notice that vertices are displayed by</span></span>
<span id="cb183-7"><a href="represent.html#cb183-7" aria-hidden="true" tabindex="-1"></a><span class="co"># &quot;names&quot; (alter IDs in this case).</span></span>
<span id="cb183-8"><a href="represent.html#cb183-8" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(gr)</span></code></pre></div>
<pre><code>## + 45/45 vertices, named, from 9f6fff1:
##  [1] 2801 2802 2803 2804 2805 2806 2807 2808 2809 2810 2811 2812 2813 2814 2815
## [16] 2816 2817 2818 2819 2820 2821 2822 2823 2824 2825 2826 2827 2828 2829 2830
## [31] 2831 2832 2833 2834 2835 2836 2837 2838 2839 2840 2841 2842 2843 2844 2845</code></pre>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="represent.html#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Edge sequence of the whole graph. Notice that vertex names (alter IDs) are</span></span>
<span id="cb185-2"><a href="represent.html#cb185-2" aria-hidden="true" tabindex="-1"></a><span class="co"># used here too.</span></span>
<span id="cb185-3"><a href="represent.html#cb185-3" aria-hidden="true" tabindex="-1"></a><span class="fu">E</span>(gr)</span></code></pre></div>
<pre><code>## + 259/259 edges from 9f6fff1 (vertex names):
##  [1] 2801--2802 2801--2803 2801--2804 2801--2805 2801--2806 2801--2807
##  [7] 2801--2808 2801--2809 2801--2810 2801--2811 2801--2812 2801--2813
## [13] 2801--2814 2801--2815 2801--2818 2801--2820 2801--2823 2801--2825
## [19] 2801--2827 2801--2828 2801--2829 2801--2831 2801--2840 2801--2841
## [25] 2802--2803 2802--2804 2802--2805 2802--2806 2802--2807 2802--2808
## [31] 2802--2809 2802--2810 2802--2811 2802--2812 2802--2813 2802--2815
## [37] 2802--2823 2802--2831 2802--2840 2802--2841 2803--2804 2803--2805
## [43] 2803--2806 2803--2807 2803--2808 2803--2809 2803--2810 2803--2811
## [49] 2803--2812 2803--2840 2803--2841 2804--2805 2804--2806 2804--2807
## [55] 2804--2808 2804--2809 2804--2810 2804--2811 2804--2840 2804--2841
## + ... omitted several edges</code></pre>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="represent.html#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View vertex attributes and calculate statistics on them.</span></span>
<span id="cb187-2"><a href="represent.html#cb187-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-3"><a href="represent.html#cb187-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Closeness of alters to ego.</span></span>
<span id="cb187-4"><a href="represent.html#cb187-4" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(gr)<span class="sc">$</span>alter.clo</span></code></pre></div>
<pre><code>##  [1] NA  3 NA NA NA NA  5  4  5  5  5  4  3  5  3  3  1  5  4  5  5  5  5  5  2
## [26]  3  4  5  5  5  5  3  5  3  4  5  5  5  5  3  3  3  3  3  5</code></pre>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="represent.html#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mean closeness of alters to ego. </span></span>
<span id="cb189-2"><a href="represent.html#cb189-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">V</span>(gr)<span class="sc">$</span>alter.clo, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] 4.1</code></pre>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="represent.html#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="co"># More descriptive statistics on alter closeness.</span></span>
<span id="cb191-2"><a href="represent.html#cb191-2" aria-hidden="true" tabindex="-1"></a>skimr<span class="sc">::</span><span class="fu">skim_tee</span>(<span class="fu">V</span>(gr)<span class="sc">$</span>alter.clo) </span></code></pre></div>
<pre><code>## ── Data Summary ────────────────────────
##                            Values
## Name                       data  
## Number of rows             45    
## Number of columns          1     
## _______________________          
## Column type frequency:           
##   numeric                  1     
## ________________________         
## Group variables            None  
## 
## ── Variable type: numeric ──────────────────────────────────────────────────────
##   skim_variable n_missing complete_rate mean   sd p0 p25 p50 p75 p100 hist 
## 1 data                  5         0.889  4.1 1.08  1   3   5   5    5 ▁▁▅▂▇</code></pre>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="represent.html#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Alter&#39;s country of residence.</span></span>
<span id="cb193-2"><a href="represent.html#cb193-2" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(gr)<span class="sc">$</span>alter.res</span></code></pre></div>
<pre><code>##  [1] &quot;Sri Lanka&quot; &quot;Sri Lanka&quot; &quot;Sri Lanka&quot; &quot;Sri Lanka&quot; &quot;Sri Lanka&quot; &quot;Sri Lanka&quot;
##  [7] &quot;Sri Lanka&quot; &quot;Sri Lanka&quot; &quot;Sri Lanka&quot; &quot;Sri Lanka&quot; &quot;Sri Lanka&quot; &quot;Sri Lanka&quot;
## [13] &quot;Italy&quot;     &quot;Italy&quot;     &quot;Italy&quot;     &quot;Italy&quot;     &quot;Italy&quot;     &quot;Italy&quot;    
## [19] &quot;Italy&quot;     &quot;Other&quot;     &quot;Italy&quot;     &quot;Italy&quot;     &quot;Italy&quot;     &quot;Italy&quot;    
## [25] &quot;Italy&quot;     &quot;Italy&quot;     &quot;Sri Lanka&quot; &quot;Sri Lanka&quot; &quot;Sri Lanka&quot; &quot;Italy&quot;    
## [31] &quot;Italy&quot;     &quot;Italy&quot;     &quot;Italy&quot;     &quot;Italy&quot;     &quot;Italy&quot;     &quot;Italy&quot;    
## [37] &quot;Italy&quot;     &quot;Italy&quot;     &quot;Italy&quot;     &quot;Sri Lanka&quot; &quot;Sri Lanka&quot; &quot;Italy&quot;    
## [43] &quot;Italy&quot;     &quot;Italy&quot;     &quot;Italy&quot;</code></pre>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="represent.html#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Frequencies.</span></span>
<span id="cb195-2"><a href="represent.html#cb195-2" aria-hidden="true" tabindex="-1"></a>janitor<span class="sc">::</span><span class="fu">tabyl</span>(<span class="fu">V</span>(gr)<span class="sc">$</span>alter.res)</span></code></pre></div>
<pre><code>##  V(gr)$alter.res  n    percent
##            Italy 27 0.60000000
##            Other  1 0.02222222
##        Sri Lanka 17 0.37777778</code></pre>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="represent.html#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This is more readable with the pipe operator.</span></span>
<span id="cb197-2"><a href="represent.html#cb197-2" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(gr)<span class="sc">$</span>alter.res <span class="sc">%&gt;%</span> </span>
<span id="cb197-3"><a href="represent.html#cb197-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>()</span></code></pre></div>
<pre><code>##          .  n    percent
##      Italy 27 0.60000000
##      Other  1 0.02222222
##  Sri Lanka 17 0.37777778</code></pre>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="represent.html#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Alter IDs are stored in the &quot;name&quot; vertex attribute</span></span>
<span id="cb199-2"><a href="represent.html#cb199-2" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(gr)<span class="sc">$</span>name</span></code></pre></div>
<pre><code>##  [1] &quot;2801&quot; &quot;2802&quot; &quot;2803&quot; &quot;2804&quot; &quot;2805&quot; &quot;2806&quot; &quot;2807&quot; &quot;2808&quot; &quot;2809&quot; &quot;2810&quot;
## [11] &quot;2811&quot; &quot;2812&quot; &quot;2813&quot; &quot;2814&quot; &quot;2815&quot; &quot;2816&quot; &quot;2817&quot; &quot;2818&quot; &quot;2819&quot; &quot;2820&quot;
## [21] &quot;2821&quot; &quot;2822&quot; &quot;2823&quot; &quot;2824&quot; &quot;2825&quot; &quot;2826&quot; &quot;2827&quot; &quot;2828&quot; &quot;2829&quot; &quot;2830&quot;
## [31] &quot;2831&quot; &quot;2832&quot; &quot;2833&quot; &quot;2834&quot; &quot;2835&quot; &quot;2836&quot; &quot;2837&quot; &quot;2838&quot; &quot;2839&quot; &quot;2840&quot;
## [41] &quot;2841&quot; &quot;2842&quot; &quot;2843&quot; &quot;2844&quot; &quot;2845&quot;</code></pre>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="represent.html#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We can also create new vertex attributes.</span></span>
<span id="cb201-2"><a href="represent.html#cb201-2" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(gr)<span class="sc">$</span>new.attribute <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">45</span></span>
<span id="cb201-3"><a href="represent.html#cb201-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-4"><a href="represent.html#cb201-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Now a new attribute is listed for the graph.</span></span>
<span id="cb201-5"><a href="represent.html#cb201-5" aria-hidden="true" tabindex="-1"></a>gr</span></code></pre></div>
<pre><code>## IGRAPH 9f6fff1 UNW- 45 259 -- 
## + attr: .egoID (g/n), ego_ID (g/c), name (v/c), alter_num (v/n),
## | alter.sex (v/c), alter.age.cat (v/c), alter.rel (v/c), alter.nat
## | (v/c), alter.res (v/c), alter.clo (v/n), alter.loan (v/c), alter.fam
## | (v/c), alter.age (v/n), new.attribute (v/n), weight (e/n)
## + edges from 9f6fff1 (vertex names):
##  [1] 2801--2802 2801--2803 2801--2804 2801--2805 2801--2806 2801--2807
##  [7] 2801--2808 2801--2809 2801--2810 2801--2811 2801--2812 2801--2813
## [13] 2801--2814 2801--2815 2801--2818 2801--2820 2801--2823 2801--2825
## [19] 2801--2827 2801--2828 2801--2829 2801--2831 2801--2840 2801--2841
## [25] 2802--2803 2802--2804 2802--2805 2802--2806 2802--2807 2802--2808
## + ... omitted several edges</code></pre>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="represent.html#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Also edges have attributes, in this case &quot;weight&quot;.</span></span>
<span id="cb203-2"><a href="represent.html#cb203-2" aria-hidden="true" tabindex="-1"></a><span class="fu">E</span>(gr)<span class="sc">$</span>weight</span></code></pre></div>
<pre><code>##   [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 1 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
##  [38] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
##  [75] 1 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 2 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 1 2 1
## [112] 1 1 1 1 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 2 1 1 1 1 1 1 1 1 2 1 1 1 1 2 1 1 1
## [149] 1 1 1 1 1 1 1 2 2 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 1 1 1 1 1 1
## [186] 1 1 1 1 1 1 1 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 2 1 1 1 1 2 1 1 2 1 1 1 1 1 1
## [223] 1 1 1 1 1 1 1 2 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 1 1</code></pre>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="represent.html#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Frequencies of edge weights.</span></span>
<span id="cb205-2"><a href="represent.html#cb205-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tabyl</span>(<span class="fu">E</span>(gr)<span class="sc">$</span>weight)</span></code></pre></div>
<pre><code>##  E(gr)$weight   n    percent
##             1 235 0.90733591
##             2  24 0.09266409</code></pre>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="represent.html#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Also graphs have attributes, and we can query or assign them. For example,</span></span>
<span id="cb207-2"><a href="represent.html#cb207-2" aria-hidden="true" tabindex="-1"></a><span class="co"># assign the &quot;ego_ID&quot; attribute for this graph: this is the personal network of</span></span>
<span id="cb207-3"><a href="represent.html#cb207-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ego ID 28.</span></span>
<span id="cb207-4"><a href="represent.html#cb207-4" aria-hidden="true" tabindex="-1"></a>gr<span class="sc">$</span>ego_ID <span class="ot">&lt;-</span> <span class="dv">28</span></span>
<span id="cb207-5"><a href="represent.html#cb207-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-6"><a href="represent.html#cb207-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Check that the new attribute was created</span></span>
<span id="cb207-7"><a href="represent.html#cb207-7" aria-hidden="true" tabindex="-1"></a>gr</span></code></pre></div>
<pre><code>## IGRAPH 9f6fff1 UNW- 45 259 -- 
## + attr: .egoID (g/n), ego_ID (g/n), name (v/c), alter_num (v/n),
## | alter.sex (v/c), alter.age.cat (v/c), alter.rel (v/c), alter.nat
## | (v/c), alter.res (v/c), alter.clo (v/n), alter.loan (v/c), alter.fam
## | (v/c), alter.age (v/n), new.attribute (v/n), weight (e/n)
## + edges from 9f6fff1 (vertex names):
##  [1] 2801--2802 2801--2803 2801--2804 2801--2805 2801--2806 2801--2807
##  [7] 2801--2808 2801--2809 2801--2810 2801--2811 2801--2812 2801--2813
## [13] 2801--2814 2801--2815 2801--2818 2801--2820 2801--2823 2801--2825
## [19] 2801--2827 2801--2828 2801--2829 2801--2831 2801--2840 2801--2841
## [25] 2802--2803 2802--2804 2802--2805 2802--2806 2802--2807 2802--2808
## + ... omitted several edges</code></pre>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="represent.html#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Displaying vertex attributes in network visualization                     ----</span></span>
<span id="cb209-2"><a href="represent.html#cb209-2" aria-hidden="true" tabindex="-1"></a><span class="co"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - </span></span>
<span id="cb209-3"><a href="represent.html#cb209-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-4"><a href="represent.html#cb209-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Let&#39;s visualize our ego-network, using different node colors for different </span></span>
<span id="cb209-5"><a href="represent.html#cb209-5" aria-hidden="true" tabindex="-1"></a><span class="co"># countries of residence of alters.</span></span>
<span id="cb209-6"><a href="represent.html#cb209-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-7"><a href="represent.html#cb209-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Vertex attribute with alter&#39;s country of residence.</span></span>
<span id="cb209-8"><a href="represent.html#cb209-8" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(gr)<span class="sc">$</span>alter.res</span></code></pre></div>
<pre><code>##  [1] &quot;Sri Lanka&quot; &quot;Sri Lanka&quot; &quot;Sri Lanka&quot; &quot;Sri Lanka&quot; &quot;Sri Lanka&quot; &quot;Sri Lanka&quot;
##  [7] &quot;Sri Lanka&quot; &quot;Sri Lanka&quot; &quot;Sri Lanka&quot; &quot;Sri Lanka&quot; &quot;Sri Lanka&quot; &quot;Sri Lanka&quot;
## [13] &quot;Italy&quot;     &quot;Italy&quot;     &quot;Italy&quot;     &quot;Italy&quot;     &quot;Italy&quot;     &quot;Italy&quot;    
## [19] &quot;Italy&quot;     &quot;Other&quot;     &quot;Italy&quot;     &quot;Italy&quot;     &quot;Italy&quot;     &quot;Italy&quot;    
## [25] &quot;Italy&quot;     &quot;Italy&quot;     &quot;Sri Lanka&quot; &quot;Sri Lanka&quot; &quot;Sri Lanka&quot; &quot;Italy&quot;    
## [31] &quot;Italy&quot;     &quot;Italy&quot;     &quot;Italy&quot;     &quot;Italy&quot;     &quot;Italy&quot;     &quot;Italy&quot;    
## [37] &quot;Italy&quot;     &quot;Italy&quot;     &quot;Italy&quot;     &quot;Sri Lanka&quot; &quot;Sri Lanka&quot; &quot;Italy&quot;    
## [43] &quot;Italy&quot;     &quot;Italy&quot;     &quot;Italy&quot;</code></pre>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="represent.html#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot with alter.res as node color</span></span>
<span id="cb211-2"><a href="represent.html#cb211-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">607</span>)</span>
<span id="cb211-3"><a href="represent.html#cb211-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(gr) <span class="sc">+</span> </span>
<span id="cb211-4"><a href="represent.html#cb211-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_edge_link</span>() <span class="sc">+</span> <span class="co"># Draw edges</span></span>
<span id="cb211-5"><a href="represent.html#cb211-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_point</span>(<span class="fu">aes</span>(<span class="at">color=</span> alter.res), <span class="at">size=</span><span class="dv">5</span>) <span class="sc">+</span> <span class="co"># Draw nodes setting alter.res </span></span>
<span id="cb211-6"><a href="represent.html#cb211-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># as node color and fixed node size</span></span>
<span id="cb211-7"><a href="represent.html#cb211-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_graph</span>(<span class="at">base_family =</span> <span class="st">&#39;Helvetica&#39;</span>)</span></code></pre></div>
<p><img src="Egocentric_R_bookdown_files/figure-html/igraph-2.png" width="60%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="represent.html#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot with alter ID labels instead of circles</span></span>
<span id="cb212-2"><a href="represent.html#cb212-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">607</span>)</span>
<span id="cb212-3"><a href="represent.html#cb212-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(gr) <span class="sc">+</span> </span>
<span id="cb212-4"><a href="represent.html#cb212-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_edge_link</span>() <span class="sc">+</span></span>
<span id="cb212-5"><a href="represent.html#cb212-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_label</span>(<span class="fu">aes</span>(<span class="at">label=</span> name)) <span class="sc">+</span> </span>
<span id="cb212-6"><a href="represent.html#cb212-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_graph</span>(<span class="at">base_family =</span> <span class="st">&#39;Helvetica&#39;</span>)</span></code></pre></div>
<p><img src="Egocentric_R_bookdown_files/figure-html/igraph-3.png" width="60%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="represent.html#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Let&#39;s look at the same network, but with ego included</span></span>
<span id="cb213-2"><a href="represent.html#cb213-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">607</span>)</span>
<span id="cb213-3"><a href="represent.html#cb213-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggraph</span>(gr.ego) <span class="sc">+</span> </span>
<span id="cb213-4"><a href="represent.html#cb213-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_edge_link</span>() <span class="sc">+</span></span>
<span id="cb213-5"><a href="represent.html#cb213-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_node_label</span>(<span class="fu">aes</span>(<span class="at">label=</span> name)) <span class="sc">+</span> </span>
<span id="cb213-6"><a href="represent.html#cb213-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_graph</span>(<span class="at">base_family =</span> <span class="st">&#39;Helvetica&#39;</span>)</span></code></pre></div>
<p><img src="Egocentric_R_bookdown_files/figure-html/igraph-4.png" width="60%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="represent.html#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Indexing vertices and edges based on attributes or network structure      ----</span></span>
<span id="cb214-2"><a href="represent.html#cb214-2" aria-hidden="true" tabindex="-1"></a><span class="co"># - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - </span></span>
<span id="cb214-3"><a href="represent.html#cb214-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb214-4"><a href="represent.html#cb214-4" aria-hidden="true" tabindex="-1"></a><span class="co"># View only female alters.</span></span>
<span id="cb214-5"><a href="represent.html#cb214-5" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(gr)[alter.sex<span class="sc">==</span><span class="st">&quot;Female&quot;</span>]</span></code></pre></div>
<pre><code>## + 8/45 vertices, named, from 9f6fff1:
## [1] 2801 2805 2806 2808 2809 2828 2832 2837</code></pre>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="represent.html#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View residence country just for female alters.</span></span>
<span id="cb216-2"><a href="represent.html#cb216-2" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(gr)[alter.sex<span class="sc">==</span><span class="st">&quot;Female&quot;</span>]<span class="sc">$</span>alter.res</span></code></pre></div>
<pre><code>## [1] &quot;Sri Lanka&quot; &quot;Sri Lanka&quot; &quot;Sri Lanka&quot; &quot;Sri Lanka&quot; &quot;Sri Lanka&quot; &quot;Sri Lanka&quot;
## [7] &quot;Italy&quot;     &quot;Italy&quot;</code></pre>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="represent.html#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Frequencies of countries of residence of female alters.</span></span>
<span id="cb218-2"><a href="represent.html#cb218-2" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(gr)[alter.sex<span class="sc">==</span><span class="st">&quot;Female&quot;</span>]<span class="sc">$</span>alter.res <span class="sc">%&gt;%</span></span>
<span id="cb218-3"><a href="represent.html#cb218-3" aria-hidden="true" tabindex="-1"></a>  tabyl</span></code></pre></div>
<pre><code>##          . n percent
##      Italy 2    0.25
##  Sri Lanka 6    0.75</code></pre>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="represent.html#cb220-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View nationality for alter 2833.</span></span>
<span id="cb220-2"><a href="represent.html#cb220-2" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(gr)[name<span class="sc">==</span><span class="st">&quot;2833&quot;</span>]<span class="sc">$</span>alter.nat</span></code></pre></div>
<pre><code>## [1] &quot;Sri Lanka&quot;</code></pre>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="represent.html#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Edit nationality for alter 2833</span></span>
<span id="cb222-2"><a href="represent.html#cb222-2" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(gr)[name<span class="sc">==</span><span class="st">&quot;2833&quot;</span>]<span class="sc">$</span>alter.nat <span class="ot">&lt;-</span> <span class="st">&quot;Italy&quot;</span></span>
<span id="cb222-3"><a href="represent.html#cb222-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-4"><a href="represent.html#cb222-4" aria-hidden="true" tabindex="-1"></a><span class="co"># View all alters who know alter 2833 (vertices that are adjacent to vertex</span></span>
<span id="cb222-5"><a href="represent.html#cb222-5" aria-hidden="true" tabindex="-1"></a><span class="co"># &quot;2833&quot;).</span></span>
<span id="cb222-6"><a href="represent.html#cb222-6" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(gr)[<span class="fu">nei</span>(<span class="st">&quot;2833&quot;</span>)]</span></code></pre></div>
<pre><code>## Warning: &#39;nei&#39; is deprecated.
## Use &#39;.nei&#39; instead.
## See help(&quot;Deprecated&quot;)</code></pre>
<pre><code>## + 16/45 vertices, named, from 9f6fff1:
##  [1] 2814 2815 2821 2822 2823 2824 2825 2826 2832 2834 2835 2837 2838 2839 2843
## [16] 2845</code></pre>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="represent.html#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View the gender of all alters who know alter 2833.</span></span>
<span id="cb225-2"><a href="represent.html#cb225-2" aria-hidden="true" tabindex="-1"></a><span class="fu">V</span>(gr)[<span class="fu">nei</span>(<span class="st">&quot;2833&quot;</span>)]<span class="sc">$</span>alter.sex</span></code></pre></div>
<pre><code>## Warning: &#39;nei&#39; is deprecated.
## Use &#39;.nei&#39; instead.
## See help(&quot;Deprecated&quot;)</code></pre>
<pre><code>##  [1] &quot;Male&quot;   &quot;Male&quot;   &quot;Male&quot;   &quot;Male&quot;   &quot;Male&quot;   &quot;Male&quot;   &quot;Male&quot;   &quot;Male&quot;  
##  [9] &quot;Female&quot; &quot;Male&quot;   &quot;Male&quot;   &quot;Female&quot; &quot;Male&quot;   &quot;Male&quot;   &quot;Male&quot;   &quot;Male&quot;</code></pre>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="represent.html#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View all edges that are incident on alter 2833</span></span>
<span id="cb228-2"><a href="represent.html#cb228-2" aria-hidden="true" tabindex="-1"></a><span class="fu">E</span>(gr)[<span class="fu">inc</span>(<span class="st">&quot;2833&quot;</span>)]</span></code></pre></div>
<pre><code>## Warning: &#39;inc&#39; is deprecated.
## Use &#39;.inc&#39; instead.
## See help(&quot;Deprecated&quot;)</code></pre>
<pre><code>## + 16/259 edges from 9f6fff1 (vertex names):
##  [1] 2814--2833 2815--2833 2821--2833 2822--2833 2823--2833 2824--2833
##  [7] 2825--2833 2826--2833 2832--2833 2833--2834 2833--2835 2833--2837
## [13] 2833--2838 2833--2839 2833--2843 2833--2845</code></pre>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="represent.html#cb231-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View the weight of these edges.</span></span>
<span id="cb231-2"><a href="represent.html#cb231-2" aria-hidden="true" tabindex="-1"></a><span class="fu">E</span>(gr)[<span class="fu">inc</span>(<span class="st">&quot;2833&quot;</span>)]<span class="sc">$</span>weight</span></code></pre></div>
<pre><code>## Warning: &#39;inc&#39; is deprecated.
## Use &#39;.inc&#39; instead.
## See help(&quot;Deprecated&quot;)</code></pre>
<pre><code>##  [1] 2 2 2 1 1 1 2 1 1 1 1 1 1 1 2 1</code></pre>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="represent.html#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Max weight of any edge that is incident on alter 2833. </span></span>
<span id="cb234-2"><a href="represent.html#cb234-2" aria-hidden="true" tabindex="-1"></a><span class="fu">E</span>(gr)[<span class="fu">inc</span>(<span class="st">&quot;2833&quot;</span>)]<span class="sc">$</span>weight <span class="sc">%&gt;%</span> </span>
<span id="cb234-3"><a href="represent.html#cb234-3" aria-hidden="true" tabindex="-1"></a>  max</span></code></pre></div>
<pre><code>## Warning: &#39;inc&#39; is deprecated.
## Use &#39;.inc&#39; instead.
## See help(&quot;Deprecated&quot;)</code></pre>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="represent.html#cb237-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View all edges with weight==2 (alters who &quot;maybe&quot; know each other).</span></span>
<span id="cb237-2"><a href="represent.html#cb237-2" aria-hidden="true" tabindex="-1"></a><span class="fu">E</span>(gr)[weight<span class="sc">==</span><span class="dv">2</span>] </span></code></pre></div>
<pre><code>## + 24/259 edges from 9f6fff1 (vertex names):
##  [1] 2801--2818 2801--2829 2804--2811 2804--2840 2807--2811 2811--2812
##  [7] 2811--2828 2813--2841 2813--2845 2814--2833 2815--2833 2816--2835
## [13] 2817--2835 2821--2826 2821--2833 2821--2839 2823--2830 2825--2833
## [19] 2827--2828 2830--2835 2831--2840 2833--2843 2834--2843 2840--2844</code></pre>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="represent.html#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Conditions in R indexing can always be combined: view all &quot;maybe&quot; edges</span></span>
<span id="cb239-2"><a href="represent.html#cb239-2" aria-hidden="true" tabindex="-1"></a><span class="co"># that are incident on alter 2833.</span></span>
<span id="cb239-3"><a href="represent.html#cb239-3" aria-hidden="true" tabindex="-1"></a><span class="fu">E</span>(gr)[weight<span class="sc">==</span><span class="dv">2</span> <span class="sc">&amp;</span> <span class="fu">inc</span>(<span class="st">&quot;2833&quot;</span>)]</span></code></pre></div>
<pre><code>## Warning: &#39;inc&#39; is deprecated.
## Use &#39;.inc&#39; instead.
## See help(&quot;Deprecated&quot;)</code></pre>
<pre><code>## + 5/259 edges from 9f6fff1 (vertex names):
## [1] 2814--2833 2815--2833 2821--2833 2825--2833 2833--2843</code></pre>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="represent.html#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ***** EXERCISES</span></span>
<span id="cb242-2"><a href="represent.html#cb242-2" aria-hidden="true" tabindex="-1"></a><span class="co"># (1) Get the average alter closeness (vertex attribute $alter.clo) of Sri Lankan</span></span>
<span id="cb242-3"><a href="represent.html#cb242-3" aria-hidden="true" tabindex="-1"></a><span class="co"># alters in the personal network gr. Use mean().</span></span>
<span id="cb242-4"><a href="represent.html#cb242-4" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb242-5"><a href="represent.html#cb242-5" aria-hidden="true" tabindex="-1"></a><span class="co"># (2) How many edges in the personal network gr involve at least one close</span></span>
<span id="cb242-6"><a href="represent.html#cb242-6" aria-hidden="true" tabindex="-1"></a><span class="co"># family member and have $weight==2 (the two alters &quot;maybe&quot; know each other)?</span></span>
<span id="cb242-7"><a href="represent.html#cb242-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Remember that close family members have $relation==&quot;Close family&quot;. Use inc().</span></span>
<span id="cb242-8"><a href="represent.html#cb242-8" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb242-9"><a href="represent.html#cb242-9" aria-hidden="true" tabindex="-1"></a><span class="co"># *****</span></span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="basics.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="composition.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Egocentric_R_bookdown.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
